<!doctype html>
<html lang="en">
<body>

<object id="svg-object" data="actions.svg" type="image/svg+xml"></object><br>
<p>Write the content of this textarea to file DATA.js</p>
<textarea id="result" width="300" height="250"></textarea>

<script src="https://cdn.jsdelivr.net/npm/roughjs@4.1.4/bundled/rough.min.js"></script>
<script>
	const source = document.getElementById('svg-object');
	const resultArea = document.getElementById('result');
	source.addEventListener('load', function(){
		const icons = source.contentDocument.firstElementChild.getElementsByTagName('svg');
		// All the id in the doc follow this format
		const regex = /ic_(.*)_24px/;
		// We want to retrieve the following attributes from the svg
		// The viewBox attribute is always "0 0 24 24" so we don't take it
		// Width and height are always 24 so we don't take them
		const attributes = ['x', 'y'];
		const result = {};

		for (icon of icons) {
			const id = regex.exec(icon.getAttribute('id'))[1];
			const config = {};
			attributes.forEach(attr => config[attr[0]] = icon.getAttribute(attr));
			config.p = icon.lastElementChild.getAttribute('d');
			result[id] = config;
		}
		resultArea.value = JSON.stringify(result);
	});
</script>
</body>
</html>
